# âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

ä½¿ç”¨æ­¤æ¸…å•ç¡®ä¿éƒ¨ç½²è¿‡ç¨‹é¡ºåˆ©å®Œæˆã€‚

---

## ğŸ“¦ éƒ¨ç½²å‰å‡†å¤‡

### æœ¬åœ°ç¯å¢ƒæ£€æŸ¥

- [ ] Node.js å·²å®‰è£… (v14+)
- [ ] æœ¬åœ°æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] Redis æ•°æ®åº“æœ‰æ•°æ®
- [ ] å·²é…ç½®è‡³å°‘ä¸€ä¸ª Claude/Gemini è´¦æˆ·
- [ ] å·²åˆ›å»ºè‡³å°‘ä¸€ä¸ª API Key
- [ ] Web ç®¡ç†ç•Œé¢å¯ä»¥è®¿é—®

### æ•°æ®å¯¼å‡º

- [ ] æ‰§è¡Œæ•°æ®å¯¼å‡ºå‘½ä»¤
  ```bash
  ./deploy.sh export
  # æˆ–
  node scripts/data-transfer-enhanced.js export --output=production-backup.json
  ```
- [ ] ç¡®è®¤å¯¼å‡ºæ–‡ä»¶å­˜åœ¨ä¸”å¤§å°åˆç† (>1KB)
- [ ] å¤‡ä»½æ–‡ä»¶å·²ä¿å­˜åˆ°å®‰å…¨ä½ç½®
- [ ] (å¯é€‰) å¯¼å‡ºåŠ å¯†å¤‡ä»½ç”¨äºå­˜æ¡£

### æ–‡ä»¶å‡†å¤‡

- [ ] `production-backup-*.json` - æ•°æ®å¤‡ä»½æ–‡ä»¶
- [ ] `.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿
- [ ] `docker-compose.yml` - Docker é…ç½®
- [ ] `deploy.sh` - éƒ¨ç½²è„šæœ¬ (å·²æ·»åŠ æ‰§è¡Œæƒé™)

---

## ğŸ–¥ï¸ æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

- [ ] Linux æœåŠ¡å™¨ (Ubuntu 20.04+ / Debian 11+ / CentOS 8+)
- [ ] æœ€ä½é…ç½®: 2æ ¸ CPU, 2GB RAM, 20GB ç£ç›˜
- [ ] æ¨èé…ç½®: 4æ ¸ CPU, 4GB RAM, 50GB ç£ç›˜
- [ ] ç«¯å£ 3000 æœªè¢«å ç”¨ (æˆ–ä¿®æ”¹é…ç½®)

### è½¯ä»¶å®‰è£…

- [ ] Docker å·²å®‰è£…
  ```bash
  docker --version
  ```
- [ ] Docker Compose å·²å®‰è£…
  ```bash
  docker-compose --version
  ```
- [ ] (å¯é€‰) Nginx/Caddy åå‘ä»£ç†å·²é…ç½®

### ç½‘ç»œé…ç½®

- [ ] é˜²ç«å¢™å·²é…ç½® (å…è®¸å¿…è¦ç«¯å£)
- [ ] (å¯é€‰) åŸŸåå·²è§£æåˆ°æœåŠ¡å™¨
- [ ] (å¯é€‰) SSL è¯ä¹¦å·²é…ç½®

---

## ğŸš€ éƒ¨ç½²æ‰§è¡Œ

### ä¸Šä¼ æ–‡ä»¶

- [ ] é¡¹ç›®æ–‡ä»¶å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
  ```bash
  scp -r /path/to/project user@server:/opt/claude-relay/
  ```
- [ ] å¤‡ä»½æ–‡ä»¶å·²ä¸Šä¼ 
- [ ] æ–‡ä»¶æƒé™æ­£ç¡®

### ç¯å¢ƒé…ç½®

- [ ] å¤åˆ¶ `.env.production` åˆ° `.env`
- [ ] ä¿®æ”¹ `JWT_SECRET` (å¿…é¡»ä¿®æ”¹!)
- [ ] ä¿®æ”¹ `ENCRYPTION_KEY` (å¿…é¡»ä¿®æ”¹!)
  - âš ï¸ å¦‚æœä½¿ç”¨æœ¬åœ°ç›¸åŒçš„å¯†é’¥,å¯ç›´æ¥å¤åˆ¶
  - âš ï¸ å¦‚æœä½¿ç”¨æ–°å¯†é’¥,å¯¼å…¥æ—¶ä¼šè‡ªåŠ¨é‡æ–°åŠ å¯†
- [ ] é…ç½® Redis è¿æ¥ä¿¡æ¯
- [ ] é…ç½®å…¶ä»–å¿…è¦å‚æ•°

### æœåŠ¡å¯åŠ¨

- [ ] æ‹‰å– Docker é•œåƒ
  ```bash
  docker-compose pull
  ```
- [ ] å¯åŠ¨æœåŠ¡
  ```bash
  docker-compose up -d
  ```
- [ ] æ£€æŸ¥å®¹å™¨çŠ¶æ€
  ```bash
  docker-compose ps
  ```
- [ ] æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
  ```bash
  docker-compose logs claude-relay
  ```

---

## ğŸ“¥ æ•°æ®å¯¼å…¥

### å¯¼å…¥å‡†å¤‡

- [ ] æœåŠ¡å·²æˆåŠŸå¯åŠ¨
- [ ] å¤‡ä»½æ–‡ä»¶å·²ä¸Šä¼ åˆ°å®¹å™¨
  ```bash
  docker cp backup.json container_name:/app/backup.json
  ```

### æ‰§è¡Œå¯¼å…¥

- [ ] è¿è¡Œå¯¼å…¥å‘½ä»¤
  ```bash
  docker-compose exec claude-relay node scripts/data-transfer-enhanced.js import \
    --input=/app/backup.json --force
  ```
- [ ] ç¡®è®¤å¯¼å…¥æˆåŠŸ (æ— é”™è¯¯æç¤º)
- [ ] æ£€æŸ¥å¯¼å…¥ç»Ÿè®¡ä¿¡æ¯

### å¯¼å…¥éªŒè¯

- [ ] éªŒè¯ API Keys æ•°é‡
  ```bash
  docker-compose exec claude-relay npm run cli keys list
  ```
- [ ] éªŒè¯è´¦æˆ·æ•°é‡
  ```bash
  docker-compose exec claude-relay npm run cli accounts list
  ```
- [ ] éªŒè¯ç®¡ç†å‘˜è´¦æˆ·
  ```bash
  docker-compose exec claude-relay npm run cli status
  ```

---

## âœ… åŠŸèƒ½æµ‹è¯•

### å¥åº·æ£€æŸ¥

- [ ] API å¥åº·æ£€æŸ¥é€šè¿‡
  ```bash
  curl http://localhost:3000/health
  ```
- [ ] Redis è¿æ¥æ­£å¸¸
  ```bash
  docker-compose exec redis redis-cli ping
  ```

### Web ç•Œé¢æµ‹è¯•

- [ ] å¯ä»¥è®¿é—® `http://server-ip:3000/web`
- [ ] ç®¡ç†å‘˜ç™»å½•æˆåŠŸ
- [ ] ä»ªè¡¨æ¿æ•°æ®æ˜¾ç¤ºæ­£å¸¸
- [ ] API Keys åˆ—è¡¨æ˜¾ç¤ºæ­£ç¡®
- [ ] è´¦æˆ·åˆ—è¡¨æ˜¾ç¤ºæ­£ç¡®

### API åŠŸèƒ½æµ‹è¯•

- [ ] è·å– API Key ä¿¡æ¯æˆåŠŸ
  ```bash
  curl http://localhost:3000/api/v1/key-info \
    -H "x-api-key: your-key"
  ```
- [ ] æµ‹è¯•å¯¹è¯æ¥å£æˆåŠŸ
  ```bash
  curl -X POST http://localhost:3000/api/v1/messages \
    -H "x-api-key: your-key" \
    -H "Content-Type: application/json" \
    -d '{"model":"claude-sonnet-4-20250514","max_tokens":100,"messages":[{"role":"user","content":"Hello"}]}'
  ```
- [ ] æµå¼å“åº”æ­£å¸¸ (å¦‚æœä½¿ç”¨)

---

## ğŸ”’ å®‰å…¨æ£€æŸ¥

### é…ç½®å®‰å…¨

- [ ] `JWT_SECRET` å·²è®¾ç½®ä¸ºå¼ºéšæœºå€¼
- [ ] `ENCRYPTION_KEY` å·²è®¾ç½®ä¸º 32 å­—ç¬¦éšæœºå€¼
- [ ] (æ¨è) Redis å·²è®¾ç½®å¯†ç 
- [ ] å¤‡ä»½æ–‡ä»¶å·²ä»æœåŠ¡å™¨åˆ é™¤æˆ–ç§»åˆ°å®‰å…¨ä½ç½®
- [ ] `.env` æ–‡ä»¶æƒé™è®¾ç½®ä¸º 600
  ```bash
  chmod 600 .env
  ```

### ç½‘ç»œå®‰å…¨

- [ ] (æ¨è) ä½¿ç”¨ Nginx/Caddy åå‘ä»£ç†
- [ ] (æ¨è) é…ç½® HTTPS
- [ ] (æ¨è) é…ç½®é˜²ç«å¢™è§„åˆ™
- [ ] ä¸å¿…è¦çš„ç«¯å£å·²å…³é—­

---

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### æ—¥å¿—é…ç½®

- [ ] æ—¥å¿—æ­£å¸¸è¾“å‡º
  ```bash
  docker-compose logs -f claude-relay
  ```
- [ ] æ—¥å¿—æ–‡ä»¶æ­£å¸¸åˆ›å»º (`logs/` ç›®å½•)
- [ ] æ—¥å¿—è½®è½¬é…ç½®æ­£ç¡®

### å¤‡ä»½è®¡åˆ’

- [ ] é…ç½®è‡ªåŠ¨å¤‡ä»½è„šæœ¬
- [ ] æµ‹è¯•å¤‡ä»½è„šæœ¬æ‰§è¡ŒæˆåŠŸ
- [ ] è®¾ç½® crontab å®šæ—¶ä»»åŠ¡
- [ ] (æ¨è) å¤‡ä»½åˆ°è¿œç¨‹å­˜å‚¨

### ç›‘æ§å·¥å…· (å¯é€‰)

- [ ] (å¯é€‰) Redis Commander å¯è®¿é—®
  ```bash
  docker-compose --profile monitoring up -d redis-commander
  # è®¿é—® http://server-ip:8081
  ```
- [ ] (å¯é€‰) Prometheus å·²é…ç½®
- [ ] (å¯é€‰) Grafana å·²é…ç½®

---

## ğŸ“ æ–‡æ¡£å’Œè®°å½•

### éƒ¨ç½²è®°å½•

- [ ] è®°å½•æœåŠ¡å™¨ IP/åŸŸå: `_______________`
- [ ] è®°å½•ç®¡ç†å‘˜è´¦æˆ·: `_______________`
- [ ] è®°å½•éƒ¨ç½²æ—¶é—´: `_______________`
- [ ] è®°å½•æœåŠ¡ç‰ˆæœ¬: `_______________`

### é…ç½®å¤‡ä»½

- [ ] `.env` æ–‡ä»¶å·²å¤‡ä»½åˆ°å®‰å…¨ä½ç½®
- [ ] `docker-compose.yml` å·²å¤‡ä»½
- [ ] ç®¡ç†å‘˜å¯†ç å·²è®°å½•åˆ°å¯†ç ç®¡ç†å™¨

### è¿ç»´æ–‡æ¡£

- [ ] å›¢é˜Ÿæˆå‘˜å·²äº†è§£æœåŠ¡åœ°å€
- [ ] è¿ç»´æ–‡æ¡£å·²åˆ†äº«ç»™ç›¸å…³äººå‘˜
- [ ] æ•…éšœè”ç³»äººå·²ç¡®å®š

---

## ğŸ¯ æœ€ç»ˆéªŒè¯

### ç«¯åˆ°ç«¯æµ‹è¯•

- [ ] ä»å®¢æˆ·ç«¯ (SillyTavern/Claude Code ç­‰) è¿æ¥æˆåŠŸ
- [ ] å®Œæ•´å¯¹è¯æµç¨‹æµ‹è¯•é€šè¿‡
- [ ] ä½¿ç”¨ç»Ÿè®¡æ­£å¸¸è®°å½•
- [ ] å¤šä¸ª API Key å¯ä»¥æ­£å¸¸ä½¿ç”¨
- [ ] è´¦æˆ·åˆ‡æ¢åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½æµ‹è¯•

- [ ] å“åº”æ—¶é—´æ­£å¸¸ (<2s)
- [ ] å†…å­˜ä½¿ç”¨æ­£å¸¸ (<500MB)
- [ ] CPU ä½¿ç”¨æ­£å¸¸ (<50%)
- [ ] å¹¶å‘è¯·æ±‚æµ‹è¯•é€šè¿‡

### æ•…éšœæ¢å¤æµ‹è¯•

- [ ] æœåŠ¡é‡å¯åæ­£å¸¸è¿è¡Œ
  ```bash
  docker-compose restart
  ```
- [ ] Redis é‡å¯åæ•°æ®å®Œæ•´
- [ ] å®¹å™¨åˆ é™¤é‡å»ºåæœåŠ¡æ­£å¸¸
  ```bash
  docker-compose down && docker-compose up -d
  ```

---

## âœ¨ éƒ¨ç½²å®Œæˆ

æ‰€æœ‰æ£€æŸ¥é¡¹é€šè¿‡å,éƒ¨ç½²å³å®Œæˆ!

### ä¸‹ä¸€æ­¥å»ºè®®

1. **æ€§èƒ½ä¼˜åŒ–**: æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´é…ç½®
2. **ç›‘æ§å‘Šè­¦**: é…ç½®ç›‘æ§å’Œå‘Šè­¦é€šçŸ¥
3. **å®šæœŸç»´æŠ¤**: è®¾ç½®å®šæœŸå¤‡ä»½å’Œæ›´æ–°è®¡åˆ’
4. **æ–‡æ¡£æ›´æ–°**: è®°å½•ä»»ä½•è‡ªå®šä¹‰é…ç½®å’Œå˜æ›´

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./deploy.sh status

# æŸ¥çœ‹æ—¥å¿—
./deploy.sh logs

# é‡å¯æœåŠ¡
./deploy.sh restart

# å¤‡ä»½æ•°æ®
docker-compose exec claude-relay node scripts/data-transfer-enhanced.js export \
  --output=/app/data/backup-$(date +%Y%m%d).json
```

---

**éƒ¨ç½²æ—¥æœŸ**: _______________
**éƒ¨ç½²äººå‘˜**: _______________
**å®¡æ ¸äººå‘˜**: _______________

ğŸ‰ **æ­å–œ!æœåŠ¡å·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ!**
